# 前端應用程式說明

這是一個簡單的物品借用系統前端應用程式，使用 Vue.js 3 和 Bootstrap 5 建立。

## 技術棧

- **Vue.js 3** (CDN 版本) - 前端框架
- **Bootstrap 5** - CSS 框架，用於樣式設計
- **Axios** - HTTP 請求庫
- **Bootstrap Icons** - 圖示庫

## 檔案結構

```
frontend/
├── index.html    # 主要的 HTML 檔案
├── app.js        # Vue.js 應用程式邏輯
└── README.md      # 本說明文件
```

## 前置準備

### 後端設定

在啟動前端之前，請確保後端已經正確設定：

1. **安裝後端依賴**：
   ```bash
   cd backend/app
   pip install -r requirements.txt
   ```

2. **確認後端 Blueprint 已註冊**：
   檢查 `backend/app/__init__.py` 是否已註冊所有 Blueprint（應該已經完成）

3. **啟動後端服務**：
   ```bash
   cd backend
   python run.py
   ```
   後端應該會在 `http://localhost:8000` 運行

## 如何啟動

### 方法一：直接開啟 HTML 檔案

1. 確保後端服務正在運行（`http://localhost:8000`）
2. 直接用瀏覽器開啟 `index.html` 檔案

**注意**：由於瀏覽器的 CORS 政策，直接開啟 HTML 檔案可能會遇到跨域問題。建議使用方法二。

### 方法二：使用簡單的 HTTP 伺服器

#### 使用 Python (推薦)

```bash
# Python 3
cd frontend
python -m http.server 8080

# 然後在瀏覽器開啟 http://localhost:8080
```

#### 使用 Node.js

```bash
# 安裝 http-server
npm install -g http-server

# 啟動伺服器
cd frontend
http-server -p 8080

# 然後在瀏覽器開啟 http://localhost:8080
```

#### 使用 VS Code Live Server

1. 在 VS Code 中安裝 "Live Server" 擴充功能
2. 在 `index.html` 上按右鍵，選擇 "Open with Live Server"

#### 使用提供的啟動腳本 (macOS/Linux)

```bash
cd frontend
./start.sh
```

然後在瀏覽器開啟 `http://localhost:8080`

## 功能說明

### 會員功能

1. **登入/註冊**
   - 註冊時 email 必須是 `@ntu.edu.tw` 結尾
   - 登入時可選擇會員或員工身份

2. **我的物品**
   - 查看自己上架的所有物品
   - 上傳新物品
   - 編輯物品資訊
   - 申請審核（物品狀態為 "Not verified" 時）
   - 下架物品

3. **瀏覽物品**
   - 選擇類別查看物品
   - 查看物品詳情
   - 將物品加入預約列表
   - 檢舉物品

4. **個人紀錄**
   - **預約紀錄**：查看所有預約，查看詳情，取消預約
   - **評論**：查看可評論的物品，撰寫評論
   - **貢獻紀錄**：查看自己的貢獻和封鎖的類別

### 員工功能

1. **審核物品**
   - 查看待審核的物品清單
   - 通過或拒絕物品驗證

2. **處理檢舉**
   - 查看待處理的檢舉
   - 處理檢舉：撤回、封鎖類別、下架物品

## API 設定

預設的 API 基礎 URL 是 `http://localhost:8000`。

如果需要修改，請編輯 `app.js` 檔案中的這一行：

```javascript
const API_BASE_URL = 'http://localhost:8000';
```

## 使用說明

### 登入系統

1. 開啟應用程式
2. 如果還沒有帳號，點擊「註冊」標籤進行註冊
3. 輸入 email（必須是 @ntu.edu.tw）、密碼和姓名
4. 註冊成功後，切換到「登入」標籤
5. 輸入 email 和密碼，選擇登入身份（會員或員工）
6. 點擊「登入」

### 會員操作流程

#### 上傳物品

1. 登入後，點擊導航欄的「我的物品」
2. 點擊「上傳新物品」按鈕
3. 填寫物品資訊：
   - 物品名稱
   - 描述
   - 外借時長（天數）
   - 類別 ID（需要知道後端的類別 ID）
   - 取貨地點 ID 列表（用逗號分隔，例如：1,2,3）
4. 點擊「上傳」
5. 上傳後，物品狀態為 "Not verified"，需要點擊「申請審核」等待員工審核

#### 預約物品

1. 點擊導航欄的「瀏覽物品」
2. 選擇類別（需要輸入類別 ID）
3. 查看物品列表
4. 點擊「加入預約」按鈕
5. 填寫預約資訊：
   - 物品 ID（已自動填入）
   - 取貨地點 ID
   - 預計開始時間
   - 預計歸還時間
6. 可以新增多個物品到同一個預約
7. 點擊「建立預約」

#### 查看預約

1. 點擊導航欄的「個人紀錄」
2. 在「預約紀錄」標籤中查看所有預約
3. 點擊「查看詳情」查看預約的詳細資訊
4. 點擊「取消預約」可以取消預約（需在開始時間前 24 小時）

#### 撰寫評論

1. 點擊「個人紀錄」→「評論」標籤
2. 查看可評論的物品列表
3. 點擊「撰寫評論」
4. 輸入評分（1-5）和評論內容
5. 點擊「提交」

### 員工操作流程

#### 審核物品

1. 以員工身份登入
2. 點擊導航欄的「審核物品」
3. 查看待審核的物品列表
4. 點擊「通過」或「不通過」按鈕

#### 處理檢舉

1. 點擊導航欄的「處理檢舉」
2. 查看待處理的檢舉列表
3. 選擇處理方式：
   - **撤回**：撤回檢舉
   - **封鎖類別**：封鎖該物品所屬的類別
   - **下架**：下架該物品

## 注意事項

1. **類別 ID 和取貨地點 ID**：目前前端需要手動輸入這些 ID。理想情況下，後端應該提供 API 來取得這些列表，但為了簡化，目前需要手動輸入。

2. **時間格式**：預約時的時間輸入使用瀏覽器的 `datetime-local` 格式，會自動轉換為 ISO 格式發送給後端。

3. **Token 儲存**：登入後的 token 會儲存在瀏覽器的 localStorage 中，關閉瀏覽器後重新開啟仍會保持登入狀態。

4. **錯誤處理**：如果 API 呼叫失敗，會顯示錯誤訊息。成功操作會顯示成功訊息。

5. **CORS**：如果遇到跨域問題，請確保後端已設定允許來自前端的請求。

## 未來改進建議

1. 新增類別和取貨地點的選擇器（需要後端提供對應的 API）
2. 新增物品詳情頁面，顯示借用時間表
3. 新增圖片上傳功能
4. 改進錯誤訊息的顯示方式
5. 新增載入動畫
6. 新增表單驗證
7. 新增響應式設計優化

## 疑難排解

### 無法登入

- 檢查後端服務是否正在運行
- 檢查 API_BASE_URL 是否正確
- 檢查瀏覽器控制台是否有錯誤訊息

### CORS 錯誤

- 確保使用 HTTP 伺服器開啟前端（不要直接開啟 HTML 檔案）
- 檢查後端的 CORS 設定

### API 呼叫失敗

- 檢查後端服務是否正常運行
- 檢查 token 是否有效
- 查看瀏覽器控制台的錯誤訊息

## 聯絡資訊

如有問題，請檢查後端 API 文件或聯絡開發團隊。

